name = "icomment"
compatibility_date = "2025-01-16"
main = "functions/_middleware.ts"

[env.production]
vars = { ENV = "production", AUTH_ENABLED = "true", MAX_ATTACHMENT_SIZE = "5242880", RATE_LIMIT_ENABLED = "true", APP_NAME = "Guru", APP_LOGO_URL = "/logo.svg", BRAND_COLOR = "#a855f7" }

[env.development]
vars = { ENV = "development", AUTH_ENABLED = "false", MAX_ATTACHMENT_SIZE = "5242880", RATE_LIMIT_ENABLED = "false", APP_NAME = "Guru", APP_LOGO_URL = "/logo.svg", BRAND_COLOR = "#a855f7" }

# Database bindings (D1)
# NOTE: database_id is auto-populated by setup script
[[d1_databases]]
binding = "DB"
database_id = ""
database_name = "icomment"

# KV namespace bindings
# NOTE: id is auto-populated by setup script
[[kv_namespaces]]
binding = "KV"
id = ""

# R2 bucket bindings
[[r2_buckets]]
binding = "R2"
bucket_name = "icomment-attachments"
