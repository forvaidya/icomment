name = "icomment"
compatibility_date = "2025-01-16"
main = "functions/_middleware.ts"

[env.production]
vars = { ENV = "production", AUTH_ENABLED = "true", MAX_ATTACHMENT_SIZE = "5242880", RATE_LIMIT_ENABLED = "true", APP_NAME = "Guru", APP_LOGO_URL = "/logo.svg", BRAND_COLOR = "#a855f7" }

[env.development]
vars = { ENV = "development", AUTH_ENABLED = "false", MAX_ATTACHMENT_SIZE = "5242880", RATE_LIMIT_ENABLED = "false", APP_NAME = "Guru", APP_LOGO_URL = "/logo.svg", BRAND_COLOR = "#a855f7" }

# Database bindings (D1)
[[d1_databases]]
binding = "DB"
database_id = "785a9289-4c9d-4220-96c1-e54c2bdcd836"
database_name = "icomment"

# KV namespace bindings (Cache)
[[kv_namespaces]]
binding = "KV"
id = "3115bd225b3b4c5795f8730fd30f4b5f"

# R2 bucket bindings (always available)
[[r2_buckets]]
binding = "R2"
bucket_name = "icomment-attachments"
